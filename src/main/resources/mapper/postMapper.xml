<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.green.users.post.mapper.PostMapper">

  <select id="getPostList">
    SELECT  
      PO_NUM,
      COM_ID,
      PO_TITLE,
      SKILL,
      CAREER,
      REGION,
      PO_QUAL,
      PO_CONTENT,
      PO_IMAGE
    FROM  
      POST
  </select>
  
  <select id="getView">
  
    SELECT
      PO_NUM,
	  COM_ID,
	  PO_TITLE,
	  SKILL,
	  CAREER,
	  REGION,
	  PO_QUAL,
	  PO_CONTENT,
	  PO_IMAGE
    FROM POST
    WHERE
      PO_NUM = #{ po_num } 
  
  </select>
  
  <select id="getResumePostList" resultType="com.green.users.post.domain.PostVo">
  
    SELECT
      PO_NUM,
	  COM_ID,
	  PO_TITLE,
	  SKILL,
	  CAREER,
	  REGION,
	  PO_QUAL,
	  PO_CONTENT,
	  PO_IMAGE
	FROM
	  POST
	WHERE
	  COM_ID = #{ com_id }
  	ORDER BY PO_NUM ASC
  
  </select>
  
  <insert id="insertScrap" parameterType="com.green.users.post.domain.UserBookVo">
		INSERT INTO USERBOOK (
		  UB_NUM,
		  USER_ID,
		  PO_NUM,
		  UB_BOOLEAN
		)
		VALUES (
		  (SELECT NVL(MAX(UB_NUM),0) + 1 FROM USERBOOK),
		  #{ user_id },
		  #{ po_num },
		  CASE WHEN #{ub_boolean} THEN 1 ELSE 0 END
		)
	</insert>

	<delete id="deleteScrap">
		DELETE
		  FROM USERBOOK
		WHERE
		  PO_NUM = #{po_num}
	</delete>

	<select id="countScrap" resultType="int">
		SELECT COUNT(*)
		  FROM USERBOOK
		WHERE
		  USER_ID = #{ arg0 }
		AND
		  PO_NUM = #{ arg1 }
	</select>

</mapper>












