<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.green.users.post.mapper.BookmarkMapper">

  <select id="checkUBNO" resultType="int">
    SELECT
      UB_BOOLEAN
    FROM
      USERBOOK
    WHERE
      USER_ID = #{ user_id }
    AND
      PO_NUM = #{ po_num }
  </select>
   

  <select id="getUserbook" resultType="com.green.users.post.domain.UserBookVo">
    SELECT
      PO_NUM,
      USER_ID,
      UB_NUM,
      UB_BOOLEAN
    FROM
      USERBOOK
    WHERE
      UB_BOOLEAN = #{ ub_boolean }
    AND
      USER_ID = #{ user_id }
  </select>
  
  <update id="addBoolean">
    UPDATE USERBOOK
    SET
      UB_BOOLEAN = 1
    WHERE
      PO_NUM = #{ po_num }
    AND
      USER_ID = #{ user_id }
  </update>

  <update id="canclBoolean">
    UPDATE USERBOOK
    SET
      UB_BOOLEAN = 0
    WHERE
      PO_NUM = #{ po_num }
    AND
      USER_ID = #{ user_id }
  </update>
    
  <insert id="insertUserbook">
    INSERT INTO USERBOOK (
      PO_NUM,
      USER_ID,
      UB_NUM,
      UB_BOOLEAN
    )
    VALUES (
      PO_NUM = #{ po_num },
      USER_ID = #{ user_id },
      NVL((SELECT MAX(UB_NUM) FROM USERBOOK), 0) + 1,
      1
    )
  </insert>
      
</mapper>